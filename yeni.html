<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PandaLingo - Pandas √ñƒüren</title>
    <style>
        :root {
            --duo-green: #58cc02;
            --duo-green-dark: #46a302;
            --duo-red: #ff4b4b;
            --duo-red-dark: #ea2b2b;
            --duo-blue: #1cb0f6;
            --duo-gold: #ffc800;
            --duo-gray: #e5e5e5;
            --duo-text: #3c3c3c;
            --bg: #fff;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--duo-text);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            touch-action: manipulation;
        }

        header {
            display: flex;
            align-items: center;
            padding: 20px 5%;
            gap: 15px;
            flex-shrink: 0;
            background: #fff;
            z-index: 5;
            border-bottom: 2px solid #f0f0f0;
        }

        .close-btn {
            font-size: 1.8rem;
            color: #afafaf;
            cursor: pointer;
            text-decoration: none;
        }

        .progress-container {
            flex: 1;
            height: 18px;
            background: var(--duo-gray);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--duo-green), #78d857);
            transition: width 0.6s ease;
            border-radius: 10px;
        }

        .hearts {
            color: var(--duo-red);
            font-weight: bold;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .game-area {
            flex: 1;
            padding: 20px 5%;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            max-width: 700px;
            margin: 0 auto;
            width: 100%;
            overflow-y: auto;
            padding-bottom: 140px;
        }

        h2 {
            font-size: 1.6rem;
            margin: 20px 0 30px;
            color: #2c3e50;
            text-align: center;
            font-weight: 600;
        }

        .mascot-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            width: 100%;
            animation: fadeIn 0.6s ease;
        }

        .mascot {
            font-size: 4rem;
            transition: transform 0.3s ease;
        }

        .mascot.jump { animation: jump 0.6s ease; }
        .mascot.sad { transform: rotate(10deg) scale(0.9); }

        @keyframes jump {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .speech-bubble {
            border: 3px solid #cce5ff;
            padding: 16px 24px;
            border-radius: 24px;
            position: relative;
            color: #2c3e50;
            font-size: 1.1rem;
            line-height: 1.5;
            background: #edf9ff;
            max-width: 75%;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .speech-bubble::before {
            content: '';
            position: absolute;
            left: -14px;
            top: 50%;
            transform: translateY(-50%);
            border-width: 12px 14px 12px 0;
            border-style: solid;
            border-color: transparent #cce5ff transparent transparent;
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            border-width: 12px 14px 12px 0;
            border-style: solid;
            border-color: transparent #edf9ff transparent transparent;
        }

        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 16px;
            font-family: 'Consolas', 'Courier New', monospace;
            margin: 20px 0;
            font-size: 1.1rem;
            text-align: left;
            border: 1px solid #475569;
            width: 100%;
            box-sizing: border-box;
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .blank {
            display: inline-block;
            background: #fff;
            color: #1e293b;
            padding: 2px 8px;
            border-radius: 6px;
            min-width: 100px;
            text-align: center;
            font-weight: bold;
        }

        .options-grid {
            display: grid;
            gap: 14px;
            width: 100%;
            animation: fadeIn 0.6s ease;
        }

        .option-card {
            border: 3px solid #e0e0e0;
            border-radius: 18px;
            padding: 18px;
            cursor: pointer;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 16px;
            transition: all 0.2s ease;
            background: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }

        .option-card:hover { 
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }

        .option-card.active {
            border-color: var(--duo-blue);
            background: #e6f7ff;
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(28,176,246,0.3);
        }

        .key-hint {
            background: #f0f0f0;
            border-radius: 8px;
            padding: 8px 12px;
            font-weight: bold;
            color: #666;
            flex-shrink: 0;
        }

        footer {
            padding: 20px 5%;
            border-top: 2px solid #e5e5e5;
            background: #fff;
            flex-shrink: 0;
            z-index: 10;
        }

        .btn-check {
            background: var(--duo-green);
            color: white;
            border: none;
            border-bottom: 5px solid var(--duo-green-dark);
            padding: 18px 0;
            border-radius: 18px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            max-width: 600px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            transition: all 0.2s;
            box-shadow: 0 6px 12px rgba(88,204,2,0.3);
        }

        .btn-check:active {
            transform: translateY(4px);
            border-bottom-width: 1px;
        }

        .btn-check:disabled {
            background: #b0b0b0;
            border-color: #999;
            color: #777;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .feedback-sheet {
            position: fixed;
            bottom: -100%;
            left: 0;
            width: 100%;
            padding: 30px 5%;
            box-sizing: border-box;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            transition: bottom 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            z-index: 20;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.2);
        }

        .feedback-sheet.correct { background: linear-gradient(#d0ffae, #b8ff9b); bottom: 0; }
        .feedback-sheet.wrong { background: linear-gradient(#ffcfcf, #ffb8b8); bottom: 0; }

        .feedback-content {
            display: flex;
            gap: 20px;
            align-items: center;
            width: 100%;
            justify-content: center;
        }

        .feedback-icon {
            font-size: 3rem;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: pop 0.5s ease;
        }

        @keyframes pop {
            0% { transform: scale(0); }
            80% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .btn-continue {
            padding: 18px 50px;
            border-radius: 20px;
            font-weight: bold;
            text-transform: uppercase;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            min-width: 200px;
            transition: all 0.2s;
        }

        .btn-continue.correct {
            background: var(--duo-green);
            color: white;
            border-bottom: 5px solid var(--duo-green-dark);
            box-shadow: 0 6px 12px rgba(88,204,2,0.4);
        }

        .btn-continue.wrong {
            background: var(--duo-red);
            color: white;
            border-bottom: 5px solid var(--duo-red-dark);
        }

        .end-screen {
            text-align: center;
            display: none;
            padding: 40px 20px;
            animation: fadeIn 1s ease;
        }

        .xp-circle {
            width: 150px;
            height: 150px;
            border: 12px solid var(--duo-gold);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 2.8rem;
            color: var(--duo-gold);
            margin: 30px auto;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(255,200,0,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 10px 20px rgba(255,200,0,0.3); }
            50% { box-shadow: 0 10px 40px rgba(255,200,0,0.6); }
            100% { box-shadow: 0 10px 20px rgba(255,200,0,0.3); }
        }

        .streak {
            font-size: 1.8rem;
            margin: 20px 0;
            color: var(--duo-green-dark);
        }

        /* Konfeti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f00;
            pointer-events: none;
            z-index: 100;
            animation: confetti-fall linear forwards;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(720deg);
            }
        }
    </style>
</head>
<body>

    <header>
        <a href="#" class="close-btn">‚úï</a>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="hearts">‚ù§Ô∏è <span id="lives">5</span></div>
    </header>

    <div class="game-area" id="game-area"></div>

    <div class="end-screen" id="end-screen">
        <div class="xp-circle">
            <div>+150</div>
            <div style="font-size:1rem; margin-top:5px;">XP</div>
        </div>
        <h2>Tebrikler! üêº</h2>
        <p style="font-size:1.3rem; max-width:500px; margin:20px auto;">
            Pandas temellerini ba≈üarƒ±yla tamamladƒ±n!<br>
            Artƒ±k veri analizinde bir panda kadar ustasƒ±n.
        </p>
        <div class="streak">üî• <strong>7 g√ºn seri!</strong></div>
        <button class="btn-check" onclick="location.reload()" style="max-width:300px; margin:20px 0;">Tekrar Oyna</button>
        <br>
        <a href="#" style="color:var(--duo-blue); text-decoration:none; font-weight:bold; font-size:1.2rem;">Ana Men√ºye D√∂n</a>
    </div>

    <footer id="footer-controls">
        <button class="btn-check" id="check-btn" onclick="checkAnswer()" disabled>KONTROL ET</button>
    </footer>

    <div class="feedback-sheet" id="feedback-sheet">
        <div class="feedback-content">
            <div class="feedback-icon" id="feedback-icon">‚úì</div>
            <div>
                <h3 style="margin:0; font-size:1.8rem;" id="feedback-title">Harika!</h3>
                <p style="margin:10px 0 0; font-size:1.1rem;" id="feedback-msg"></p>
            </div>
        </div>
        <button class="btn-continue" id="continue-btn" onclick="nextQuestion()">DEVAM ET</button>
    </div>

    <!-- Sesler -->
    <audio id="sound-correct" src="https://assets.duolingo.com/sounds/correct.mp3" preload="auto"></audio>
    <audio id="sound-wrong" src="https://assets.duolingo.com/sounds/wrong.mp3" preload="auto"></audio>
    <audio id="sound-finish" src="https://assets.duolingo.com/sounds/finish.mp3" preload="auto"></audio>

<script>
    // Geni≈ületilmi≈ü soru seti
    const questions = [
        { type: "mc", title: "Ba≈ülangƒ±√ß", mascot: "Pandas k√ºt√ºphanesini i√ße aktarmak i√ßin hangi kod kullanƒ±lƒ±r?", options: [
            { text: "import pandas as pd", correct: true },
            { text: "import pandas", correct: false },
            { text: "from pandas import *", correct: false },
            { text: "import pd", correct: false }
        ]},
        { type: "mc", title: "Dosya Okuma", mascot: "Bir CSV dosyasƒ±nƒ± okumak i√ßin doƒüru y√∂ntem nedir?", options: [
            { text: "pd.read_csv('dosya.csv')", correct: true },
            { text: "pd.load_csv('dosya.csv')", correct: false },
            { text: "pd.open('dosya.csv')", correct: false },
            { text: "df.read('dosya.csv')", correct: false }
        ]},
        { type: "fill", title: "Kod Tamamlama", mascot: "A≈üaƒüƒ±daki kodu tamamla: DataFrame'in ilk 10 satƒ±rƒ±nƒ± g√∂rmek i√ßin...", 
          code: "df.______()", answer: "head(10)" },
        { type: "mc", title: "Veri ƒ∞nceleme", mascot: "df.info() komutu neyi g√∂sterir?", options: [
            { text: "S√ºtun tipleri, eksik deƒüerler, bellek kullanƒ±mƒ±", correct: true },
            { text: "Sadece ilk 5 satƒ±rƒ±", correct: false },
            { text: "ƒ∞statistiksel √∂zet", correct: false },
            { text: "Sadece s√ºtun isimleri", correct: false }
        ]},
        { type: "mc", title: "Eksik Veri", mascot: "Eksik deƒüerleri ortalama ile doldurmak i√ßin:", options: [
            { text: "df.fillna(df.mean())", correct: true },
            { text: "df.replace(np.nan, mean)", correct: false },
            { text: "df.dropna()", correct: false },
            { text: "df.clean()", correct: false }
        ]},
        { type: "tf", title: "Doƒüru/Yanlƒ±≈ü", mascot: "df.describe() sadece sayƒ±sal s√ºtunlarƒ± √∂zetler. Doƒüru mu?", options: [
            { text: "Doƒüru", correct: true },
            { text: "Yanlƒ±≈ü", correct: false }
        ]},
        { type: "mc", title: "Filtreleme", mascot: "Ya≈üƒ± 30'dan b√ºy√ºk olanlarƒ± se√ßmek i√ßin:", options: [
            { text: "df[df['Ya≈ü'] > 30]", correct: true },
            { text: "df.filter('Ya≈ü > 30')", correct: false },
            { text: "df.where('Ya≈ü > 30')", correct: false },
            { text: "df.select('Ya≈ü > 30')", correct: false }
        ]},
        { type: "fill", title: "Kod Tamamlama", mascot: "Belirli bir s√ºtunu se√ßmek i√ßin:", 
          code: "df[______]", answer: "'S√ºtunAdƒ±'" },
        { type: "mc", title: "Gruplama", mascot: "groupby'dan sonra hangi metod genellikle kullanƒ±lƒ±r?", options: [
            { text: "agg() veya mean(), sum() gibi", correct: true },
            { text: "filter()", correct: false },
            { text: "sort()", correct: false },
            { text: "join()", correct: false }
        ]},
        { type: "mc", title: "Son Dokunu≈ü", mascot: "DataFrame'i CSV'ye kaydetmek i√ßin:", options: [
            { text: "df.to_csv('yeni.csv')", correct: true },
            { text: "df.save_csv()", correct: false },
            { text: "df.write('yeni.csv')", correct: false },
            { text: "pd.save(df, 'yeni.csv')", correct: false }
        ]}
    ];

    let currentQIndex = 0;
    let lives = 5;
    let selectedOption = null;
    let score = 0;
    const totalXP = 150;

    const gameArea = document.getElementById('game-area');
    const checkBtn = document.getElementById('check-btn');
    const progressBar = document.getElementById('progress-bar');
    const feedbackSheet = document.getElementById('feedback-sheet');
    const feedbackTitle = document.getElementById('feedback-title');
    const feedbackMsg = document.getElementById('feedback-msg');
    const feedbackIcon = document.getElementById('feedback-icon');
    const continueBtn = document.getElementById('continue-btn');
    const livesEl = document.getElementById('lives');
    const mascot = document.querySelector('.mascot');

    // Ses fonksiyonlarƒ±
    function playSound(id) {
        document.getElementById(id)?.play();
    }

    // Konfeti efekti
    function launchConfetti() {
        for (let i = 0; i < 100; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = ['#58cc02','#1cb0f6','#ffc800','#ff4b4b'][Math.floor(Math.random()*4)];
            confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
            confetti.style.opacity = Math.random() * 0.8 + 0.4;
            document.body.appendChild(confetti);
            setTimeout(() => confetti.remove(), 5000);
        }
    }

    function loadQuestion() {
        if (currentQIndex >= questions.length) {
            finishGame();
            return;
        }

        const q = questions[currentQIndex];
        const progress = (currentQIndex / questions.length) * 100;
        progressBar.style.width = `${progress}%`;

        selectedOption = null;
        checkBtn.disabled = true;
        feedbackSheet.style.bottom = "-100%";
        gameArea.innerHTML = "";

        let contentHTML = `
            <h2>${q.title}</h2>
            <div class="mascot-container">
                <div class="mascot">üêº</div>
                <div class="speech-bubble">${q.mascot}</div>
            </div>
        `;

        if (q.code) {
            let codeDisplay = q.code.replace('______', '<span class="blank">______</span>');
            contentHTML += `<div class="code-block">${codeDisplay}</div>`;
        }

        contentHTML += `<div class="options-grid">`;

        if (q.type === "mc" || q.type === "tf") {
            q.options.forEach((opt, idx) => {
                contentHTML += `
                    <div class="option-card" onclick="selectOption(${idx}, this)">
                        <span class="key-hint">${idx + 1}</span> ${opt.text}
                    </div>
                `;
            });
        } else if (q.type === "fill") {
            contentHTML += `
                <input type="text" id="fill-input" placeholder="Cevabƒ±nƒ± yaz..." 
                       style="padding:15px; font-size:1.1rem; border-radius:16px; border:3px solid #ccc; width:100%; box-sizing:border-box;"
                       oninput="checkFillInput()">
            `;
        }

        contentHTML += `</div>`;
        gameArea.innerHTML = contentHTML;
    }

    function selectOption(idx, element) {
        document.querySelectorAll('.option-card').forEach(el => el.classList.remove('active'));
        element.classList.add('active');
        selectedOption = idx;
        checkBtn.disabled = false;
    }

    function checkFillInput() {
        checkBtn.disabled = document.getElementById('fill-input').value.trim() === '';
    }

    function checkAnswer() {
        const q = questions[currentQIndex];
        let isCorrect = false;

        if (q.type === "mc" || q.type === "tf") {
            isCorrect = q.options[selectedOption]?.correct;
        } else if (q.type === "fill") {
            const input = document.getElementById('fill-input').value.trim();
            isCorrect = input.toLowerCase() === q.answer.toLowerCase() ||
                        input === q.answer;
        }

        if (isCorrect) {
            score += 10;
            playSound('sound-correct');
            launchConfetti();
            document.querySelector('.mascot').classList.add('jump');
            setTimeout(() => document.querySelector('.mascot').classList.remove('jump'), 600);
        } else {
            playSound('sound-wrong');
            document.querySelector('.mascot').classList.add('sad');
            setTimeout(() => document.querySelector('.mascot').classList.remove('sad'), 1000);
        }

        showFeedback(isCorrect, q);
    }

    function showFeedback(isCorrect, question) {
        feedbackSheet.classList.remove('correct', 'wrong');
        continueBtn.classList.remove('correct', 'wrong');

        if (isCorrect) {
            feedbackSheet.classList.add('correct');
            continueBtn.classList.add('correct');
            feedbackTitle.innerText = "Harika! üéâ";
            feedbackMsg.innerText = "M√ºkemmel gidiyorsun!";
            feedbackIcon.innerText = "‚úì";
        } else {
            lives--;
            livesEl.innerText = lives;

            feedbackSheet.classList.add('wrong');
            continueBtn.classList.add('wrong');
            feedbackTitle.innerText = "Hata var!";
            feedbackIcon.innerText = "‚úï";

            let correctText = "";
            if (question.type === "mc" || question.type === "tf") {
                correctText = question.options.find(o => o.correct).text;
            } else if (question.type === "fill") {
                correctText = question.answer;
            }
            feedbackMsg.innerHTML = `Doƒüru cevap: <strong>${correctText}</strong>`;

            if (lives === 0) {
                setTimeout(() => {
                    alert("Canlarƒ±n bitti! Ba≈ütan ba≈üla üêº");
                    location.reload();
                }, 500);
                return;
            }
        }

        document.getElementById('footer-controls').style.display = 'none';
        feedbackSheet.style.bottom = "0";
    }

    function nextQuestion() {
        currentQIndex++;
        document.getElementById('footer-controls').style.display = 'flex';
        loadQuestion();
    }

    function finishGame() {
        playSound('sound-finish');
        launchConfetti();
        setTimeout(() => {
            gameArea.style.display = 'none';
            document.getElementById('footer-controls').style.display = 'none';
            document.querySelector('header').style.display = 'none';
            document.getElementById('end-screen').style.display = 'block';
        }, 800);
    }

    // Ba≈ülat
    loadQuestion();
</script>
</body>
</html>